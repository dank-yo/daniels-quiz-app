{"ast":null,"code":"var _jsxFileName = \"/home/daniel/daniels-quiz-app/src/pages/register.js\";\n/* register.js\n * This page is responsible for letting the user register for an account.\n * This page encrypts the password on the front end before ever getting sent to the client.\n * \n * Daniel\n */\n\nimport React from 'react';\nimport axios from 'axios';\nimport \"./css/error.css\";\nimport bcrypt from \"bcryptjs-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Register extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      username: '',\n      firstname: '',\n      lastname: '',\n      passwrd: '',\n      posts: []\n    };\n    this.handleEventUpdate = event => {\n      const target = event.target;\n      const name = target.name;\n      const value = target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n    this.errorHandlingServer = () => {\n      const message = [\"<br></br><h3> There was an internal error. Please try again later </h3><br></br>\"];\n      const placeLocation = document.getElementById(\"error-section\");\n      placeLocation.innerHTML = message;\n      let col = \"red\";\n      placeLocation.style.borderColor = col;\n    };\n    this.errorHandlingRegister = () => {\n      const message = [\"<br></br><h3> Invalid username or password </h3><br></br>\"];\n      const placeLocation = document.getElementById(\"error-section\");\n      placeLocation.innerHTML = message;\n      let col = \"red\";\n      placeLocation.style.borderColor = col;\n    };\n    this.handleRegsitrationForm = async event => {\n      event.preventDefault();\n      var salt = await bcrypt.genSaltSync(10);\n      var hash = await bcrypt.hash(this.state.passwrd, salt);\n      const payload = {\n        username: this.state.username,\n        password: {\n          hash: hash,\n          salt: salt\n        },\n        name: {\n          firstname: this.state.firstname,\n          lastname: this.state.lastname\n        },\n        email: this.state.email,\n        role: \"user\",\n        lastlogin: new Date()\n      };\n      axios({\n        url: 'http://localhost:8080/api/register',\n        method: 'POST',\n        data: payload\n      })\n      //User redirect needs to go in this statement.\n      .then(response => {\n        //console.log(response.status) // use this to test response status from server\n        console.log('[Console]: Data has been sent to the server!');\n        window.open('login', \"_self\");\n      })\n      //Error handling should be sent to a notification box on the DOM\n      .catch(() => {\n        this.errorHandlingRegister();\n        console.log('[Console]: Internal Server Error!');\n      });\n    };\n  }\n  // Registration form\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"textFont\",\n        children: \"Registration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center text-red\",\n        id: \"error-section\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mt-3\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.handleRegsitrationForm,\n          autoComplete: \"off\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3 mt-3 form-outline form-white\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"Username:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                name: \"username\",\n                value: this.state.username,\n                onChange: this.handleEventUpdate,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3 mt-3 form-outline form-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"Firstname:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"m-2 form-control\",\n                name: \"firstname\",\n                placeholder: \"John\",\n                value: this.state.firstname,\n                onChange: this.handleEventUpdate,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"Lastname:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"m-2 form-control\",\n                name: \"lastname\",\n                placeholder: \"Doe\",\n                value: this.state.lastname,\n                onChange: this.handleEventUpdate,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3 form-outline form-white\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"Email:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                placeholder: \"placeholder@example.com\",\n                className: \"form-control\",\n                name: \"email\",\n                value: this.state.email,\n                onChange: this.handleEventUpdate,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3 form-outline form-white\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"Password:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                className: \"form-control\",\n                name: \"passwrd\",\n                value: this.state.passwrd,\n                onChange: this.handleEventUpdate,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/login\",\n            className: \"btn btn-outline-light\",\n            children: \"Already a user?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-outline-light\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default Register;","map":{"version":3,"names":["React","axios","bcrypt","Register","Component","state","username","firstname","lastname","passwrd","posts","handleEventUpdate","event","target","name","value","setState","errorHandlingServer","message","placeLocation","document","getElementById","innerHTML","col","style","borderColor","errorHandlingRegister","handleRegsitrationForm","preventDefault","salt","genSaltSync","hash","payload","password","email","role","lastlogin","Date","url","method","data","then","response","console","log","window","open","catch","render"],"sources":["/home/daniel/daniels-quiz-app/src/pages/register.js"],"sourcesContent":["/* register.js\n * This page is responsible for letting the user register for an account.\n * This page encrypts the password on the front end before ever getting sent to the client.\n * \n * Daniel\n */\n\nimport React from 'react';\nimport axios from 'axios';\nimport \"./css/error.css\"\n\nimport bcrypt from \"bcryptjs-react\";\n\n\nclass Register extends React.Component{\n\n  state = {\n    username: '',\n    firstname: '',\n    lastname: '', \n    passwrd: '',\n    posts: []\n  };\n\n  //gets the current target getting updated\n  handleEventUpdate = (event) => {\n    const target = event.target;\n    const name = target.name;\n    const value = target.value;\n\n    this.setState({\n      [name]: value\n    })\n  };\n\n  // Internal error handling\n  errorHandlingServer =() => {\n    const message = [\"<br></br><h3> There was an internal error. Please try again later </h3><br></br>\"]\n    const placeLocation = document.getElementById(\"error-section\")\n    placeLocation.innerHTML = message;\n    let col = \"red\";\n    placeLocation.style.borderColor = col;\n  }\n  // Invalid username/password error handling\n  errorHandlingRegister =() => {\n    const message = [\"<br></br><h3> Invalid username or password </h3><br></br>\"]\n    const placeLocation = document.getElementById(\"error-section\")\n    placeLocation.innerHTML = message;\n    let col = \"red\";\n    placeLocation.style.borderColor = col;\n  }\n\n  // Account registration\n  handleRegsitrationForm = async (event) =>{\n    event.preventDefault();\n\n    var salt = await bcrypt.genSaltSync(10);\n    var hash = await bcrypt.hash(this.state.passwrd, salt);\n\n    const payload = {\n      username: this.state.username,\n      password:{\n        hash: hash,\n        salt: salt\n      },\n      name:{\n        firstname: this.state.firstname,\n        lastname: this.state.lastname,\n      },\n      email: this.state.email,\n      role: \"user\",\n      lastlogin: new Date()\n    };\n\n    axios({\n      url: 'http://localhost:8080/api/register',\n      method: 'POST',\n      data: payload\n    })\n      //User redirect needs to go in this statement.\n      .then(response => {\n        //console.log(response.status) // use this to test response status from server\n        console.log('[Console]: Data has been sent to the server!');\n        window.open('login', \"_self\");\n      })\n      //Error handling should be sent to a notification box on the DOM\n      .catch(() => {\n        this.errorHandlingRegister();\n        console.log('[Console]: Internal Server Error!');\n      })\n  }\n\n  \n\n  // Registration form\n  render(){\n    return (\n      <div className='text-center text-white'>\n        <h1 className='textFont'>Registration</h1>\n        <div className='text-center text-red' id='error-section'>\n        </div>\n        <div className=\"container mt-3\">\n          <form onSubmit={this.handleRegsitrationForm} autoComplete=\"off\">\n            <div className=\"mb-3 mt-3 form-outline form-white\">\n              <label>Username:\n              <input \n                type=\"text\" \n                className=\"form-control\"\n                name='username'\n                value={this.state.username}\n                onChange={this.handleEventUpdate}\n                required/>\n              </label>\n            </div>\n            <div className=\"mb-3 mt-3 form-outline form-white\">\n              <label>Firstname:\n              <input \n                type=\"text\" \n                className=\"m-2 form-control\"\n                name='firstname'\n                placeholder='John'\n                value={this.state.firstname}\n                onChange={this.handleEventUpdate}\n                required/>\n              </label>\n              <label>Lastname:\n              <input \n                type=\"text\" \n                className=\"m-2 form-control\"\n                name='lastname'\n                placeholder='Doe'\n                value={this.state.lastname}\n                onChange={this.handleEventUpdate}\n                required/>\n              </label>\n            </div>\n            <div className=\"mb-3 form-outline form-white\">\n              <label>Email:\n              <input \n                type=\"email\" \n                placeholder='placeholder@example.com'\n                className=\"form-control\"\n                name='email'\n                value={this.state.email}\n                onChange={this.handleEventUpdate}\n                required/>\n              </label>\n            </div>\n            <div className=\"mb-3 form-outline form-white\">\n              <label>Password:\n              <input \n                type=\"password\" \n                className=\"form-control\"\n                name='passwrd'\n                value={this.state.passwrd}\n                onChange={this.handleEventUpdate}\n                required/>\n              </label>\n            </div>\n          <a href='/login' className='btn btn-outline-light' >Already a user?</a>\n          <button type=\"submit\" className=\"btn btn-outline-light\">Submit</button>\n        </form>\n      </div>\n    </div>\n    );\n  }\n}\n\nexport default Register;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}